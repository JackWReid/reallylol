{{ $scratch := newScratch }}

{{ $data := "nil" }}

{{ $key := .Get "key" }}
{{ $scratch.Set "limit" (.Get "limit" | default 10000) }}

{{ if eq $key "watched" }}
  {{ $data = first ($scratch.Get "limit") $.Site.Data.films.watched }}
{{ else if eq $key "towatch" }}
  {{ $data = first ($scratch.Get "limit") $.Site.Data.films.towatch }}
{{ end }}

<table class="media-table media-table--film" data-paginate="true">
  <thead>
    <tr>
      <th>Date</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody data-pagination-container>
    {{ range $data }}
    <tr data-item>
      <td class="media-table__date">{{ dateFormat "2006-01-02" .date_updated }}</td>
      <td class="media-table__title">{{ .name }} ({{ .year }})</td>
    </tr>
    {{ end }}
  </tbody>
</table>
<div class="pagination-controls" data-pagination-controls style="display: none;">
  <button type="button" class="pagination-controls__button pagination-controls__button--prev" data-pagination-prev aria-label="Previous page">Previous</button>
  <span class="pagination-controls__info" data-pagination-info></span>
  <button type="button" class="pagination-controls__button pagination-controls__button--next" data-pagination-next aria-label="Next page">Next</button>
</div>
