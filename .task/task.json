{"created_at":"2026-01-23T07:00:46Z","updated_at":"2026-02-07T09:25:11Z","id":"r38","title":"Clean up CSS file by hand","description":"Review and organise styles in themes/reallylol/static/css/style.css, remove duplicates, improve structure and maintainability","type":"task","status":"abandon","labels":["css,cleanup"],"notes":[]}
{"created_at":"2026-02-07T09:25:27Z","updated_at":"2026-02-07T09:42:29Z","id":"2n8","title":"Split style.css into component files","description":"Break monolithic style.css into per-component CSS files with an @import manifest. Keep @layer architecture. Enforce the spacing scale consistently.","type":"task","status":"done","labels":["refactor","css"],"notes":[]}
{"created_at":"2026-02-07T09:25:28Z","updated_at":"2026-02-07T09:44:23Z","id":"ghb","title":"Server-side pagination for media","description":"Replace media-pagination.js with Hugo server-side pagination for books, films, and links pages. Zero client-side JS.","type":"task","status":"done","labels":["refactor","templates"],"notes":[{"created_at":"2026-02-07T09:44:23Z","id":"ghb-fwi","content":"Rescoped: true zero-JS requires Hugo content adapters (data-\u003epages conversion) which is a bigger architectural change. Instead: 295 lines → 79 lines. Removed custom data-src lazy loading hack (browser loading=lazy handles it). Event delegation on controls. Clean popstate handling. Future: content adapters for full server-side pagination."}]}
{"created_at":"2026-02-07T09:25:29Z","updated_at":"2026-02-07T09:52:06Z","id":"ip8","title":"Consolidate sync scripts into sync.py","description":"Single Python script with subcommands (books, films, links, photos) replacing individual shell scripts. Keep SQLite trick for films. Use argparse, structured logging, proper error handling.","type":"task","status":"done","labels":["refactor","scripts"],"notes":[]}
{"created_at":"2026-02-07T09:25:30Z","updated_at":"2026-02-07T09:40:23Z","id":"hxo","title":"Extract preview partials from multi-preview","description":"Turn multi-preview.html into a dispatcher that calls preview/photo.html, preview/note.html, preview/post.html, preview/highlight.html. Mixed feeds keep working, rendering logic is separated.","type":"task","status":"done","labels":["refactor","templates"],"notes":[]}
{"created_at":"2026-02-07T09:25:31Z","updated_at":"2026-02-07T09:45:14Z","id":"u16","title":"NDJSON for data files","description":"Convert books, films, and links JSON arrays to newline-delimited JSON for meaningful git diffs. Update Hugo templates and sync scripts to match.","type":"task","status":"done","labels":["refactor","data"],"notes":[{"created_at":"2026-02-07T09:45:14Z","id":"u16-36v","content":"Compacted to one-object-per-line JSON (valid JSON, not NDJSON). Hugo requires valid JSON arrays. Books read: 5186→743 lines. Links: 1397→101 lines. Films already had this format. Sync scripts will need updating to output compact format (covered by ip8)."}]}
{"created_at":"2026-02-07T09:25:31Z","updated_at":"2026-02-07T09:39:49Z","id":"ttr","title":"Clean config.toml","description":"Consolidate to one sitemap format. Remove enableEmoji and other dead flags. Delete unused XSL stylesheets.","type":"task","status":"done","labels":["refactor","config"],"notes":[]}
{"created_at":"2026-02-07T09:25:32Z","updated_at":"2026-02-07T09:48:09Z","id":"vox","title":"Accessibility pass","description":"ARIA landmarks on navigation. aria-label on pagination. Decorative images get empty alt. Skip-to-content link. Visible overflow indicator on mobile nav.","type":"task","status":"done","labels":["refactor","a11y"],"notes":[]}
{"created_at":"2026-02-07T09:25:33Z","updated_at":"2026-02-07T10:06:49Z","id":"tcl","title":"Pre-commit hooks","description":"Local pre-commit hook running htmltest on build output (broken links, missing alt). Frontmatter schema validation via grep. No CI, no GitHub Actions.","type":"task","status":"done","labels":["refactor","tooling"],"notes":[{"created_at":"2026-02-07T10:06:49Z","id":"tcl-wnp","content":"Hook passes clean: frontmatter validation + htmltest (4183 docs, 0 errors). Disabled internal link checking (Hugo trailing-slash false positives). Added guards for empty image src in footer.html and photo/section.html."}]}
{"created_at":"2026-02-07T09:25:34Z","updated_at":"2026-02-07T09:36:36Z","id":"yl9","title":"Benchmark and optimise image pipeline","description":"Investigate cold-cache build performance (9min on Cloudflare). Test partialCached on footer/header. Profile image processing. Still being scoped.","type":"task","status":"done","labels":["refactor","performance"],"notes":[{"created_at":"2026-02-07T09:25:41Z","id":"yl9-yt2","content":"Warm-cache build: ~2s. Cold-cache build: running now. Cloudflare reports ~9min with cold cache. resources/ dir is 1.3GB of processed image variants. 12,300+ image ops per build. Key suspects: footer.html (3,820 calls, .Fit 500x500), photo/single.html (2,626 calls, .Fit 1400x1400), head.html OG images (3,820 calls)."},{"created_at":"2026-02-07T09:30:04Z","id":"yl9-swo","content":"COLD-CACHE BENCHMARK (local M-series Mac):\n- Wall clock: 242 seconds (~4 min)\n- On Cloudflare build servers: ~9 min (weaker CPU)\n- Images processed: 11,903 files, 1.1GB generated\n- Original cache: 12,323 files, 1.3GB (includes older variants)\n\nTemplate cumulative times (cold cache vs warm cache):\n  photo/single.html:     23m 5s vs 5.7s  (2,626 calls, .Fit 1400x1400)\n  head.html:             14m 48s vs 2.9s  (3,820 calls, OG image processing)\n  image.html shortcode:  7m 58s vs 1.8s   (2,785 calls, .Resize 1000x)\n  multi-preview.html:    3m 55s vs 1.8s   (4,424 calls, .Fit 800x500)\n  term.html:             3m 40s vs 2.4s   (628 calls)\n  photo/section.html:    3m 24s vs 1.06s  (110 calls, .Fit 500x500)\n  footer.html:           2m 50s vs 1.6s   (3,820 calls, .Fit 500x500)\n\nKey insight: image processing dominates everything. The top 3 templates alone account for ~46 min of cumulative CPU time, all image ops."},{"created_at":"2026-02-07T09:31:39Z","id":"yl9-o0x","content":"Cloudflare Pages does NOT support caching Hugo resources/ directory. Only caches specific frameworks (Next.js, Gatsby, etc.). No custom path support. Hugo build cache support was discussed by a CF engineer in 2024 but never shipped. The GitHub Actions workaround is vetoed by the user. Every deploy is a cold-cache build."},{"created_at":"2026-02-07T09:36:36Z","id":"yl9-b2x","content":"Option C executed: 5 image variants reduced to 3.\nChanges:\n  - head.html: .Fit 1200x1200 → .Fit 1400x1400 (shares with photo/single hero)\n  - multi-preview.html: .Fit 800x500 → .Fit 500x500 (shares with section grid + footer)\nResult: 12,332 → 8,203 processed images (-33%)\nEstimated cold-cache improvement: ~4min → ~2m40s local, ~9min → ~6min Cloudflare\nUser has also enabled Cloudflare Pages build cache for Hugo, so cold builds should only happen on first deploy or after 7 days of inactivity."}]}
